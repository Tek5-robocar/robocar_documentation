<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Documentation Template</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --sidebar-bg: #f8f9fa;
      --toc-active-bg: #eaf3ff;
      --border-color: #dee2e6;
      --primary-color: #3a86ff;
      --secondary-color: #ff006e;
      --text-color: #333;
      --text-light: #6c757d;
      --success-color: #06d6a0;
      --warning-color: #ffd166;
      --danger-color: #ef476f;
      --dark-bg: #2b2d42;
      --light-bg: #f5f7fa;
      --card-bg: #ffffff;
      --transition: all 0.3s ease;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.15);
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 16px;
    }

    .dark-mode {
      --sidebar-bg: #1e1f2b;
      --toc-active-bg: #2a3a5e;
      --border-color: #3a3d4f;
      --primary-color: #5a9cff;
      --text-color: #e9ecef;
      --text-light: #a3a8b8;
      --card-bg: #252837;
      --dark-bg: #1a1b25;
      --light-bg: #1e1f2b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: var(--text-color);
      line-height: 1.6;
      height: 100vh;
      overflow: hidden;
      background: var(--light-bg);
      transition: var(--transition);
    }
    
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 100px;
    }
    
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.5rem;
      margin-bottom: 1rem;
      scroll-margin-top: 100px;
      font-weight: 600;
    }
    
    h1 {
      font-size: 2.25rem;
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    h1:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 80px;
      height: 4px;
      background: var(--primary-color);
      border-radius: 2px;
    }
    
    h2 {
      font-size: 1.75rem;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
    }
    
    h3 {
      font-size: 1.4rem;
    }
    
    .container {
      display: flex;
      height: 100vh;
      transition: var(--transition);
    }
    
    /* Left Sidebar Styles */
    .sidebar {
      width: 20%;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border-color);
      padding: 1.5rem 1rem;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: var(--transition;
    }
    
    .sidebar h2 {
      font-size: 1.1rem;
      margin: 1.5rem 0 0.8rem 0;
      color: var(--text-light);
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .sidebar ul {
      list-style: none;
    }
    
    .sidebar li {
      margin: 0.4rem 0;
    }
    
    .sidebar a {
      text-decoration: none;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0.6rem 1rem;
      border-radius: var(--radius-sm);
      transition: var(--transition);
      font-size: 0.95rem;
    }
    
    .sidebar a:hover {
      background-color: rgba(0,0,0,0.05);
      color: var(--primary-color);
    }
    
    .sidebar a.active {
      background-color: var(--toc-active-bg);
      color: var(--primary-color);
      font-weight: 500;
      box-shadow: var(--shadow-sm);
    }
    
    /* Main Content Styles */
    .main-content {
      width: 60%;
      padding: 2.5rem 3rem;
      overflow-y: auto;
      background: var(--card-bg);
      box-shadow: var(--shadow-md);
      transition: var(--transition);
    }
    
    .main-content img {
      max-width: 80%;
      height: auto;
      display: block;
      margin: 1.5rem auto;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-md);
    }
    
    /* Right TOC Styles */
    .toc-sidebar {
      width: 20%;
      background: var(--sidebar-bg);
      border-left: 1px solid var(--border-color);
      padding: 1.5rem 1rem;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: var(--transition);
    }
    
    .toc-sidebar h2 {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      color: var(--text-light);
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    /* Custom TOC Styles */
    #toc {
      position: relative;
      overflow-y: auto;
      flex-grow: 1;
    }
    
    #toc .toc-list {
      list-style: none;
      padding-left: 0;
    }

    #toc .toc-level-1 {
      padding-left: 0;
    }

    #toc .toc-level-2 {
      padding-left: 1rem;
    }

    #toc .toc-level-3 {
      padding-left: 2rem;
    }

    #toc .toc-level-4 {
      padding-left: 3rem;
    }

    #toc .toc-level-5 {
      padding-left: 4rem;
    }

    #toc .toc-list-item {
      position: relative;
      margin: 0.25rem 0;
    }
    
    #toc .toc-link {
      text-decoration: none;
      color: var(--text-color);
      display: block;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-sm);
      transition: var(--transition);
      font-size: 0.9rem;
      position: relative;
    }
    
    #toc .toc-link:hover {
      background-color: rgba(0,0,0,0.05);
      color: var(--primary-color);
    }
    
    /* Active TOC link styling */
    #toc .is-active-link {
      font-weight: 600 !important;
      color: var(--primary-color) !important;
      background-color: var(--toc-active-bg) !important;
      border-left: 3px solid var(--primary-color) !important;
      padding-left: 15px !important;
    }
    
    /* Mobile Responsiveness */
    @media (max-width: 992px) {
      .container {
        flex-direction: column;
      }
      
      .sidebar, .main-content, .toc-sidebar {
        width: 100%;
        height: auto;
      }
      
      .sidebar {
        padding: 1rem;
        position: fixed;
        top: 0;
        left: -100%;
        width: 280px;
        height: 100vh;
        z-index: 1000;
        transition: left 0.3s ease;
      }
      
      .sidebar.active {
        left: 0;
      }
      
      .toc-sidebar {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        z-index: 1000;
        transition: right 0.3s ease;
        box-shadow: var(--shadow-lg);
      }
      
      .toc-sidebar.active {
        right: 0;
      }
      
      .mobile-menu-toggle {
        display: flex;
        position: fixed;
        top: 20px;
        left: 20px;
        background: var(--primary-color);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 100;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
      }
      
      .mobile-toc-toggle {
        display: flex;
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--primary-color);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 100;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
      }
      
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        display: none;
      }
      
      .overlay.active {
        display: block;
      }
      
      .main-content {
        padding: 5rem 1.5rem 2rem;
      }
    }
    
    /* Logo and branding */
    .logo {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 10px;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
      transition: var(--transition);
    }
    
    .logo svg {
      width: 32px;
      height: 32px;
      fill: currentColor;
    }
    
    /* Scrollbar styling */
    .main-content::-webkit-scrollbar,
    #toc::-webkit-scrollbar {
      width: 8px;
    }
    
    .main-content::-webkit-scrollbar-track,
    #toc::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.05);
      border-radius: 4px;
    }
    
    .main-content::-webkit-scrollbar-thumb,
    #toc::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.15);
      border-radius: 4px;
    }
    
    .main-content::-webkit-scrollbar-thumb:hover,
    #toc::-webkit-scrollbar-thumb:hover {
      background: rgba(0,0,0,0.25);
    }

    /* Table styling */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      box-shadow: var(--shadow-sm);
      border-radius: var(--radius-sm);
      overflow: hidden;
    }
    
    th, td {
      border: 1px solid var(--border-color);
      padding: 0.8rem 1rem;
      text-align: left;
    }
    
    th {
      background-color: var(--sidebar-bg);
      font-weight: 600;
      color: var(--text-color);
    }
    
    tr:nth-child(even) {
      background-color: rgba(0,0,0,0.02);
    }

    pre, code {
      font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background-color: var(--sidebar-bg);
      padding: 0.5rem;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      border: 1px solid var(--border-color);
    }

    pre {
      overflow: auto;
      margin: 1.5rem 0;
      padding: 1.2rem;
      box-shadow: var(--shadow-sm);
    }

    code {
      background-color: var(--sidebar-bg);
      padding: 0.2rem 0.4rem;
    }
    
    /* Theme toggle */
    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary-color);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 101;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
    }
    
    /* Content cards */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      margin: 1.5rem 0;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border-color);
    }
    
    .card-title {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }
    
    /* Alerts */
    .alert {
      padding: 1rem;
      border-radius: var(--radius-sm);
      margin: 1.5rem 0;
    }
    
    .alert-info {
      background-color: #e1f0fa;
      border-left: 4px solid var(--primary-color);
    }
    
    .alert-warning {
      background-color: #fff8e1;
      border-left: 4px solid var(--warning-color);
    }
    
    .alert-success {
      background-color: #e6f7ee;
      border-left: 4px solid var(--success-color);
    }
    
    .alert-danger {
      background-color: #fdeded;
      border-left: 4px solid var(--danger-color);
    }
    
    /* Search box */
    .search-box {
      margin: 1.5rem 0;
      position: relative;
    }
    
    .search-box input {
      width: 100%;
      padding: 0.8rem 1rem 0.8rem 40px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      color: var(--text-color);
      font-size: 0.95rem;
      transition: var(--transition);
    }
    
    .search-box input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
    }
    
    .search-box i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-light);
    }
    
    /* Breadcrumbs */
    .breadcrumbs {
      display: flex;
      align-items: center;
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
      color: var(--text-light);
    }
    
    .breadcrumbs a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }
    
    .breadcrumbs a:hover {
      text-decoration: underline;
    }
    
    .breadcrumbs span {
      margin: 0 8px;
    }
    
    /* Status badges */
    .badge {
      display: inline-block;
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
      margin-left: 8px;
    }
    
    .badge-new {
      background: var(--success-color);
      color: white;
    }
    
    .badge-updated {
      background: var(--warning-color);
      color: #333;
    }
    
    .badge-deprecated {
      background: var(--danger-color);
      color: white;
    }
    
    /* Page header */
    .page-header {
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .page-description {
      color: var(--text-light);
      margin-top: 0.5rem;
      font-size: 1.1rem;
    }
    
    /* TOC progress indicator */
    .toc-progress {
      height: 4px;
      background: rgba(0,0,0,0.1);
      border-radius: 2px;
      margin-bottom: 1rem;
      overflow: hidden;
    }
    
    .toc-progress-inner {
      height: 100%;
      width: 0;
      background: var(--primary-color);
      transition: width 0.3s ease;
    }
    
    /* Search Results */
    #search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card-bg);
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow-lg);
      max-height: 400px;
      overflow-y: auto;
      z-index: 100;
      margin-top: 5px;
      display: none;
      border: 1px solid var(--border-color);
    }
    
    #search-results.active {
      display: block;
    }
    
    .search-result-item {
      padding: 12px 15px;
      border-bottom: 1px solid var(--border-color);
      cursor: pointer;
      transition: var(--transition);
    }
    
    .search-result-item:hover {
      background-color: var(--toc-active-bg);
    }
    
    .search-result-title {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 4px;
    }
    
    .search-result-url {
      font-size: 0.8rem;
      color: var(--text-light);
    }
    
    .search-result-snippet {
      font-size: 0.9rem;
      margin-top: 5px;
      color: var(--text-color);
      line-height: 1.4;
    }
    
    .search-result-snippet .highlight {
      background-color: #fff9c4;
      padding: 0 2px;
      border-radius: 2px;
      font-weight: 600;
    }
    
    .snippet-divider {
      height: 1px;
      background: var(--border-color);
      margin: 8px 0;
    }
    
    .no-results {
      padding: 15px;
      text-align: center;
      color: var(--text-light);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Sidebar: Navigation -->
    <aside class="sidebar">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm0 2v14h14V5H5zm4 2h2v6H9V7zm6 0h-2v6h2V7z"/>
        </svg>
        <span>DevDocs</span>
      </div>
      
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" id="search-input" placeholder="Search documentation...">
        <div id="search-results"></div>
      </div>
      
      <h2>Getting Started</h2>
      <ul>
        <li>
          <a href="#" class="active" data-toc-id="introduction">
            <i class="fas fa-rocket"></i> Introduction
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="installation">
            <i class="fas fa-download"></i> Installation
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="configuration">
            <i class="fas fa-cog"></i> Configuration
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="authentication">
            <i class="fas fa-key"></i> Authentication
          </a>
        </li>
      </ul>
      
      <h2>Core Concepts</h2>
      <ul>
        <li>
          <a href="#" data-toc-id="architecture">
            <i class="fas fa-project-diagram"></i> Architecture
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="routing">
            <i class="fas fa-route"></i> Routing
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="state-management">
            <i class="fas fa-database"></i> State Management
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="testing">
            <i class="fas fa-vial"></i> Testing
          </a>
        </li>
      </ul>
      
      <h2>API Reference</h2>
      <ul>
        <li>
          <a href="#" data-toc-id="rest-api">
            <i class="fas fa-server"></i> REST API
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="graphql">
            <i class="fas fa-project-diagram"></i> GraphQL
          </a>
        </li>
        <li>
          <a href="#" data-toc-id="webhooks">
            <i class="fas fa-bell"></i> Webhooks
          </a>
        </li>
      </ul>
    </aside>

    <!-- Center: Main Content - Scrollable -->
    <main id="main-content" class="main-content">
      <div class="page-header">
        <h1 class="page-title">Getting Started with DevDocs</h1>
        <p class="page-description">A comprehensive guide to setting up and using our documentation platform for your development projects.</p>
      </div>
      
      <div class="breadcrumbs">
        <a href="#">Home</a>
        <span>/</span>
        <a href="#">Getting Started</a>
        <span>/</span>
        <span>Introduction</span>
      </div>
      
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <div>
          <strong>Pro Tip:</strong> Use the search feature to quickly find documentation on specific topics. You can also use the table of contents on the right to navigate this page.
        </div>
      </div>
      
      <h2 id="introduction">Introduction <span class="badge badge-new">New</span></h2>
      <p>Welcome to DevDocs, the comprehensive documentation platform designed for developers. This guide will help you understand the core concepts and get started with our platform.</p>
      
      <div class="card">
        <h3 class="card-title"><i class="fas fa-lightbulb"></i> Key Features</h3>
        <ul>
          <li>Modern, responsive design that works on any device</li>
          <li>Powerful search functionality with contextual results</li>
          <li>Interactive code examples</li>
          <li>Versioned documentation</li>
          <li>Dark/light mode toggle</li>
        </ul>
      </div>
      
      <h3>Why DevDocs?</h3>
      <p>DevDocs was created to solve common pain points developers face with documentation:</p>
      
      <div class="card">
        <div class="alert alert-success">
          <i class="fas fa-check-circle"></i>
          <div>
            <strong>Improved Search:</strong> Our enhanced search shows contextual snippets with highlighted terms for better discoverability.
          </div>
        </div>
        <div class="alert alert-warning">
          <i class="fas fa-exclamation-triangle"></i>
          <div>
            <strong>Multiple Results:</strong> Unlike traditional search, we show all occurrences on the same page, not just the first match.
          </div>
        </div>
      </div>
      
      <h3 id="installation">Installation Guide</h3>
      <p>To install DevDocs, follow these simple steps:</p>
      
      <pre><code>npm install devdocs --save
# or
yarn add devdocs</code></pre>
      
      <p>After installation, you can configure your documentation settings in the config file:</p>
      
      <pre><code>// devdocs.config.js
module.exports = {
  title: 'My Project Docs',
  theme: 'default',
  search: {
    enabled: true,
    maxResults: 10
  }
};</code></pre>
      
      <h3 id="configuration">Configuration Options</h3>
      <p>DevDocs offers extensive configuration options:</p>
      
      <table>
        <thead>
          <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>theme</td>
            <td>string</td>
            <td>'default'</td>
            <td>Choose from available themes</td>
          </tr>
          <tr>
            <td>search.enabled</td>
            <td>boolean</td>
            <td>true</td>
            <td>Enable/disable search functionality</td>
          </tr>
          <tr>
            <td>search.maxResults</td>
            <td>number</td>
            <td>10</td>
            <td>Maximum search results to display</td>
          </tr>
          <tr>
            <td>sidebar.collapsible</td>
            <td>boolean</td>
            <td>true</td>
            <td>Allow collapsing sidebar sections</td>
          </tr>
        </tbody>
      </table>
      
      <h3 id="authentication">Authentication</h3>
      <p>For API access, you'll need to authenticate using your API key:</p>
      
      <pre><code>curl -X GET \
  https://api.devdocs.com/data \
  -H 'Authorization: Bearer YOUR_API_KEY'</code></pre>
      
      <p>Make sure to keep your API key secure and never expose it in client-side code.</p>
      
      <h3 id="routing">Routing in DevDocs</h3>
      <p>Our routing system allows you to create nested documentation structures:</p>
      
      <pre><code>// routes.js
module.exports = [
  {
    path: '/getting-started',
    component: GettingStarted,
    children: [
      { path: 'installation', component: Installation },
      { path: 'configuration', component: Configuration }
    ]
  }
];</code></pre>
      
      <p>This hierarchical approach helps organize complex documentation sets.</p>
    </main>

    <!-- Right Sidebar: Table of Contents - Fixed -->
    <nav class="toc-sidebar">
      <h2>On This Page</h2>
      <div class="toc-progress">
        <div class="toc-progress-inner"></div>
      </div>
      <div id="toc">
        <ul class="toc-list">
          <li class="toc-list-item toc-level-2">
            <a href="#introduction" class="toc-link">Introduction</a>
          </li>
          <li class="toc-list-item toc-level-2">
            <a href="#installation" class="toc-link">Installation Guide</a>
          </li>
          <li class="toc-list-item toc-level-2">
            <a href="#configuration" class="toc-link">Configuration Options</a>
          </li>
          <li class="toc-list-item toc-level-2">
            <a href="#authentication" class="toc-link">Authentication</a>
          </li>
          <li class="toc-list-item toc-level-2">
            <a href="#routing" class="toc-link">Routing in DevDocs</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>

  <!-- Mobile Toggle Buttons -->
  <div class="mobile-menu-toggle" onclick="toggleSidebar()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 6h18M3 12h18M3 18h18"/>
    </svg>
  </div>
  
  <div class="mobile-toc-toggle" onclick="toggleToc()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
    </svg>
  </div>

  <!-- Overlay for mobile -->
  <div class="overlay" onclick="closeAll()"></div>

  <!-- Theme Toggle -->
  <div class="theme-toggle" onclick="toggleTheme()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </div>

  <!-- Custom JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Generate TOC
      const tocList = document.querySelector('#toc .toc-list');
      const mainContent = document.querySelector('#main-content');
      const headings = mainContent.querySelectorAll('h1, h2, h3, h4, h5, h6');
      const progressBar = document.querySelector('.toc-progress-inner');
      
      // Skip the page title
      headings.forEach(heading => {
        if (heading.classList.contains('page-title')) return;
        
        if (!heading.id) {
          heading.id = heading.textContent.trim().toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
        }
        
        const listItem = document.createElement('li');
        listItem.classList.add('toc-list-item');
        const level = parseInt(heading.tagName.substring(1));
        listItem.classList.add(`toc-level-${level}`);
        
        const link = document.createElement('a');
        link.classList.add('toc-link');
        link.href = `#${heading.id}`;
        link.textContent = heading.textContent;
        link.addEventListener('click', (e) => {
          e.preventDefault();
          document.getElementById(heading.id).scrollIntoView({ behavior: 'smooth' });
          document.querySelectorAll('#toc .is-active-link').forEach(l => l.classList.remove('is-active-link'));
          link.classList.add('is-active-link');
        });
        
        listItem.appendChild(link);
        tocList.appendChild(listItem);
      });
      
      // Set initial active link
      if (headings.length > 0) {
        const firstHeading = headings[0];
        const firstLink = document.querySelector(`#toc .toc-link[href="#${firstHeading.id}"]`);
        if (firstLink) firstLink.classList.add('is-active-link');
      }
      
      // Scroll progress tracking
      mainContent.addEventListener('scroll', function() {
        const scrollHeight = mainContent.scrollHeight - mainContent.clientHeight;
        const scrolled = (mainContent.scrollTop / scrollHeight) * 100;
        progressBar.style.width = `${scrolled}%`;
        
        // Update active TOC link
        let currentHeading = null;
        let closestDistance = Infinity;
        
        headings.forEach(heading => {
          if (heading.classList.contains('page-title')) return;
          const rect = heading.getBoundingClientRect();
          const distance = Math.abs(rect.top);
          if (rect.top >= -heading.offsetHeight && rect.top <= window.innerHeight / 2 && distance < closestDistance) {
            currentHeading = heading;
            closestDistance = distance;
          }
        });
        
        if (currentHeading) {
          document.querySelectorAll('#toc .is-active-link').forEach(l => l.classList.remove('is-active-link'));
          const tocLink = document.querySelector(`#toc .toc-link[href="#${currentHeading.id}"]`);
          if (tocLink) tocLink.classList.add('is-active-link');
        }
      });
      
      // Set initial scroll position
      mainContent.scrollTop = 0;
      
      // Initialize search functionality
      initSearch();
    });
    
    // Mobile menu functions
    function toggleSidebar() {
      document.querySelector('.sidebar').classList.toggle('active');
      document.querySelector('.overlay').classList.toggle('active');
    }
    
    function toggleToc() {
      document.querySelector('.toc-sidebar').classList.toggle('active');
      document.querySelector('.overlay').classList.toggle('active');
    }
    
    function closeAll() {
      document.querySelector('.sidebar').classList.remove('active');
      document.querySelector('.toc-sidebar').classList.remove('active');
      document.querySelector('.overlay').classList.remove('active');
    }
    
    // Theme toggle function
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
    }
    
    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
    }
    
    // Enhanced search functionality
    function initSearch() {
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      
      // Mock search index - in a real implementation, this would come from your Jekyll JSON
      const searchIndex = [
        {
          title: "Getting Started",
          url: "#",
          excerpt: "Learn how to set up your project and get started with our documentation.",
          content: "Welcome to DevDocs, the comprehensive documentation platform designed for developers. This guide will help you understand the core concepts and get started with our platform. DevDocs was created to solve common pain points developers face with documentation. Our enhanced search shows contextual snippets with highlighted terms for better discoverability. Unlike traditional search, we show all occurrences on the same page, not just the first match."
        },
        {
          title: "Installation Guide",
          url: "#installation",
          excerpt: "Step-by-step instructions to install the software on various platforms.",
          content: "To install DevDocs, follow these simple steps: npm install devdocs --save or yarn add devdocs. After installation, you can configure your documentation settings in the config file. Make sure to run the setup command after installation to initialize your project. The installation process supports Windows, macOS, and Linux operating systems."
        },
        {
          title: "Configuration Options",
          url: "#configuration",
          excerpt: "Explore all available configuration options for your project.",
          content: "DevDocs offers extensive configuration options. You can customize the theme, enable/disable features, and configure the sidebar behavior. The configuration file is written in JavaScript and supports all modern JS features. For production deployments, make sure to optimize your configuration settings for performance. The default configuration is designed to work out of the box for most projects."
        },
        {
          title: "Authentication",
          url: "#authentication",
          excerpt: "Learn how to authenticate with our API using secure tokens.",
          content: "For API access, you'll need to authenticate using your API key. Make sure to keep your API key secure and never expose it in client-side code. Our API supports OAuth2 authentication for advanced security. You can generate API keys from your account dashboard. Each key has configurable permissions and expiration dates."
        },
        {
          title: "Routing in DevDocs",
          url: "#routing",
          excerpt: "Understand how to structure your documentation with nested routes.",
          content: "Our routing system allows you to create nested documentation structures. This hierarchical approach helps organize complex documentation sets. Routes can be defined in a central configuration file. Each route can have child routes for creating multi-level documentation. The routing system supports dynamic parameters for creating flexible documentation layouts."
        }
      ];
      
      // Function to escape regex special characters
      function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      }
      
      // Function to create context snippets
      function createSnippets(content, query, maxSnippets = 3, snippetLength = 100) {
        if (!content || !query) return [];
        
        const escapedQuery = escapeRegExp(query);
        const regex = new RegExp(escapedQuery, 'gi');
        const snippets = [];
        let match;
        
        // Find all matches
        while ((match = regex.exec(content)) !== null && snippets.length < maxSnippets) {
          const start = Math.max(0, match.index - Math.floor(snippetLength / 2));
          const end = Math.min(content.length, match.index + match[0].length + Math.floor(snippetLength / 2));
          
          let snippet = content.substring(start, end);
          
          // Highlight the query term
          snippet = snippet.replace(regex, '<span class="highlight">$&</span>');
          
          // Add ellipsis if needed
          if (start > 0) snippet = '...' + snippet;
          if (end < content.length) snippet = snippet + '...';
          
          snippets.push(snippet);
        }
        
        return snippets;
      }
      
      // Live search on input
      searchInput.addEventListener('input', (e) => {
        const query = e.target.value.trim();
        
        if (query.length < 2) {
          searchResults.innerHTML = '';
          searchResults.classList.remove('active');
          return;
        }
        
        const results = searchIndex.filter(item => {
          return (item.title && item.title.toLowerCase().includes(query.toLowerCase())) ||
                 (item.excerpt && item.excerpt.toLowerCase().includes(query.toLowerCase())) ||
                 (item.content && item.content.toLowerCase().includes(query.toLowerCase()));
        });
        
        // Clear previous
        searchResults.innerHTML = '';
        
        if (results.length === 0) {
          searchResults.innerHTML = `<div class="no-results">No results found for "${query}"</div>`;
          searchResults.classList.add('active');
          return;
        }
        
        // Add results to DOM
        results.forEach(result => {
          const item = document.createElement('div');
          item.className = 'search-result-item';
          
          // Create title with highlighting
          const title = result.title.replace(
            new RegExp(escapeRegExp(query), 'gi'), 
            '<span class="highlight">$&</span>'
          );
          
          // Create snippets from content
          const snippets = createSnippets(result.content, query);
          
          // Build snippets HTML
          let snippetsHtml = '';
          snippets.forEach((snippet, index) => {
            snippetsHtml += `
              <div class="search-result-snippet">${snippet}</div>
              ${index < snippets.length - 1 ? '<div class="snippet-divider"></div>' : ''}
            `;
          });
          
          item.innerHTML = `
            <div class="search-result-title">${title}</div>
            <div class="search-result-url">${result.url}</div>
            <div class="search-result-snippets">
              ${snippetsHtml}
            </div>
          `;
          
          item.addEventListener('click', () => {
            // In a real implementation, this would navigate to the page
            window.location.href = result.url;
            searchResults.classList.remove('active');
          });
          
          searchResults.appendChild(item);
        });
        
        searchResults.classList.add('active');
      });
      
      // Hide search results on outside click
      document.addEventListener('click', (e) => {
        if (!searchResults.contains(e.target) && e.target !== searchInput) {
          searchResults.classList.remove('active');
        }
      });
    }
  </script>
</body>
</html>