<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ page.title }}</title>

  <!-- TOC styles (Tocbot) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css">

  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      height: 100vh;
    }
    aside, nav, main {
      padding: 1rem;
      overflow-y: auto;
    }
    aside {
      width: 20%;
      background: #f4f4f4;
      border-right: 1px solid #ccc;
    }
    main {
      width: 60%;
    }
    nav {
      width: 20%;
      background: #f9f9f9;
      border-left: 1px solid #ccc;
    }
    a {
      text-decoration: none;
      color: #0366d6;
    }

    #toc ul {
      list-style-type: none;
      padding-left: 0;
    }

    #toc a {
      display: block;
      padding: 2px 0;
      color: #0366d6;
    }

    #toc .is-active-link {
      font-weight: bold;
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <!-- Left Column: Page List -->
  <aside>
    <h2>Pages</h2>
    <ul>
      {% assign md_pages = site.pages | where_exp:"p","p.ext == '.md'" %}
      {% for page in md_pages %}
        {% if page.title %}
          <li><a href="{{ page.url }}">{{ page.title }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </aside>

  <!-- Center Column: Page Content -->
  <main id="main-content">
    <h1>{{ page.title }}</h1>
    {{ content }}
  </main>

  <!-- Right Column: Table of Contents -->
  <nav>
    <h2>On This Page</h2>
    <div id="toc"></div>
  </nav>

  <!-- Tocbot JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script>
  <script>
    tocbot.init({
      tocSelector: '#toc',
      contentSelector: '#main-content',
      headingSelector: 'h2, h3',
      collapseDepth: 6,
      smoothScroll: true
    });
  </script>
</body>
</html>
